[tool.ruff]
required-version = ">=0.9.0"
target-version = "py312"

[tool.ruff.lint]
select = [
  "A",      # flake8-builtins
  "ASYNC",  # flake8-async
  "B",      # flake8-bugbear
  "C4",     # flake8-comprehensions
  "D",      # pydocstyle
  "E",      # pycodestyle errors
  "F",      # pyflakes
  "I",      # isort
  "ICN",    # flake8-import-conventions
  "LOG",    # flake8-logging
  "N",      # pep8-naming
  "RUF",    # ruff-specific rules
  "S",      # flake8-bandit (security)
  "SIM",    # flake8-simplify
  "T20",    # flake8-print
  "UP",     # pyupgrade
  "W",      # pycodestyle warnings
]
ignore = [
  "D100",   # Missing docstring in public module (handled at module level)
  "D104",   # Missing docstring in public package
  "D203",   # one-blank-line-before-class (conflicts with D211)
  "D213",   # multi-line-summary-second-line (conflicts with D212)
  "E501",   # line-too-long (handled by formatter)
]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401"]  # Allow unused imports in __init__.py
"tests/**/*.py" = [
  "D103",   # Missing docstring in public function (test functions)
  "S101",   # Use of assert (expected in tests)
]

[tool.ruff.lint.isort]
known-first-party = ["custom_components.srat"]
force-sort-within-sections = true

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.pytest.ini_options]
asyncio_mode = "auto"
testpaths = ["custom_components/tests"]

[tool.mypy]
python_version = "3.12"
show_error_codes = true
follow_imports = "silent"
ignore_missing_imports = true
strict_equality = true
warn_incomplete_stub = true
warn_redundant_casts = true
warn_unused_configs = true
check_untyped_defs = true
disallow_incomplete_defs = true
disallow_untyped_defs = true
no_implicit_optional = true
warn_unreachable = true
# Relaxed checks for HA custom components without full homeassistant stubs
disallow_subclassing_any = false
disallow_untyped_calls = false
disallow_untyped_decorators = false
warn_return_any = false
warn_unused_ignores = false
